@model HEMUdaan.Models.QuizModel

@{
    Layout = "~/Views/Shared/_UdaanLayout.cshtml";

}
@{
    List<HEMUdaan.Models.Topics> topics = new List<HEMUdaan.Models.Topics>();
    dynamic topicid;
    if (Model.LanguageID == 0 || Model.LanguageID == null)
    {
        string param = "Exec View_User_Topic  " + ViewBag.CourseID + ", 1";
        Model.UserTopic = HEMUdaan.Models.DBManager.ExecuteDapper<HEMUdaan.Models.UserTopicModel>(param).ToList<HEMUdaan.Models.UserTopicModel>();
    }
    else
    {
        string param = "Exec View_User_Topic  " + ViewBag.CourseID + ", 1";
        Model.UserTopic = HEMUdaan.Models.DBManager.ExecuteDapper<HEMUdaan.Models.UserTopicModel>(param).ToList<HEMUdaan.Models.UserTopicModel>();
    }

}
<style>
    .youtube-player {
        border: 1px solid #e2e2e2;
    }

    .youtube-player-caption {
        color: #167ac6;
        font-weight: bold;
    }

    .modal-content {
        position: relative;
        background-color: none !important;
        -webkit-background-clip: padding-box;
        background-clip: padding-box;
        border: none;
        border-radius: 6px;
        outline: 0;
        box-shadow: none;
        height: 34%;
        width: 40%
    }

    .modal-content {
        box-shadow: none;
    }
   
</style>
<style>


    .report_card {
        border: 1px solid #ccc;
        box-shadow: 0 8px 6px -6px #00000040;
    }

    .Msg11 {
        width: 678px;
        color: ghostwhite;
        color: lightseagreen;
        margin: 880px 25px 24px 4px;
    }

    .disabled-link {
        color: #999; /* Change the color to a muted or grayed-out color */
        pointer-events: none; /* Prevent clicking on the link */
        text-decoration: none; /* Remove underline or other decorations */
        cursor: not-allowed; /* Show a "not allowed" cursor */
    }
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/magnific-popup.js/1.1.0/magnific-popup.min.css">


<link rel="stylesheet" href="~/Content/bs-stepper/css/bs-stepper.min.css">

@*<nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">HEM Values Workshop</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="@Url.Action("Index", "User")">Dashboard</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="@Url.Action("Index", "Home")">Log Out</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>*@


<div class="container-fluid bg-white">
    <div id="stepper3" class="card shadow-lg p-3 mb-5 bg-white rounded bs-stepper">
        <div class="bs-stepper-header row ">
            <div class="bs-stepper-header">
                <div class="step" data-target="#test-nl-1">
                    <button type="button" class="btn step-trigger">
                        <span class="bs-stepper-circle">1</span>
                        <span class="bs-stepper-label">Learn</span>
                    </button>
                </div>
                <div class="line"></div>
                <div class="step" data-target="#test-nl-2">
                    <div class="btn step-trigger">
                        <span class="bs-stepper-circle">2</span>
                        <span class="bs-stepper-label">Solve Practicals</span>
                    </div>
                </div>

            </div>
            <div class="clearfix"></div>


            <div class="bs-stepper-content">
                <div class="row mb-4">
                    <div class="col-md-12">
                        <div class="card h-200 d-flex align-items-center justify-content-center">
                            <div class="row g-0 w-100">
                                <div class="container">
                                    <div class="bg-white shadow-sm p-4">
                                        <div class="row align-items-center">
                                            <div class="col-md-3 col-sm-3 col-xs-4 text-center">
                                                <img alt="Hem-Virtues" class="img-fluid" src="@Url.Content(Model.FeaturedImage)" />
                                            </div>
                                            <div class="col-md-6 col-sm-9 col-xs-12">
                                                <h4 class="m-0">
                                                    <i class="fa fa-book"></i>
                                                    @Model.CourseName
                                                </h4>
                                                <p class="m-0 text-justify d-none d-md-block">
                                                    @Model.Description
                                                </p>
                                                <h5 class="mt-3">
                                                    <i class="fa fa-youtube-play"></i>
                                                    @string.Join(", ", ViewBag.TopicsCount) Topics |
                                                    <i class="fa fa-youtube-play"></i>
                                                    @string.Join(", ", ViewBag.subtopicsCount) Sub Topics |
                                                    <span class="cursor" data-toggle="modal" data-target="#formModal">
                                                        <i class="fa fa-feed"></i>
                                                        Feedback
                                                    </span>
                                                </h5>
                                            </div>
                                            <div class="col-md-3 col-sm-8 col-xs-12">
                                                <ul class="list-unstyled">
                                                    <li class="nav-link active show">

                                                        <button class="btn btn-primary" onclick="stepper3.previous()">1. Learn From Videos</button>
                                                    </li>
                                                    <br />
                                                    <li class="nav-link active show">

                                                        <button class="btn btn-primary" onclick="stepper3.next()">2. Solve Practicals</button>
                                                    </li>
                                                </ul>
                                            </div>

                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>

                <div id="test-nl-1" class="row mb-4 content">
                    <div class="col-md-12">
                        <div class="card h-200 d-flex align-items-center justify-content-center">
                            <div class="row g-0 w-100">
                                <div class="tab-pane" id="w4-video">
                                    <div class="container">
                                        <div class="box-shadow mb-4">
                                            <div class="row" id="theory">
                                                <h4 class="m-3 text-left border-bottom">
                                                    <i class="fa fa-play"></i>
                                                    Learn watching the below video
                                                </h4>

                                                <div class="mt-lg text-left">
                                                    <div class="row">
                                                        @foreach (var topic in ViewBag.Topics)
                                                        {
                                                            <div class="col-12">
                                                                <p class="m-none pl-md">
                                                                    <strong class="text-dark text-md">Pre Value Survey</strong>
                                                                </p>
                                                            </div>

                                                            if (Model.UserTopic.Count > 0)
                                                            {
                                                                foreach (var item in Model.UserTopic.Where(x => x.ParentTopicID == topic.TopicID))
                                                                {
                                                                    if (!string.IsNullOrEmpty(item.TopicName) && item.TopicName.Contains("MCQ"))
                                                                    {
                                                                        <div class="col-12 col-sm-6 col-md-4 col-lg-3 mb-3 d-flex justify-content-center">
                                                                            @if (item.TopicName == "Pre Value Survey MCQ")
                                                                            {
                                                                                <div class="text-center">
                                                                                    <a href="@Url.Action("Survey", "Course", new { CourseID = ViewBag.CourseID, TopicID = item.TopicID, LanguageID = 1 })" data-kmt="1">
                                                                                        <img src="@Url.Content(item.TrainerExercise)" class="img-fluid rounded" />
                                                                                        <h6 class="m-0">Pre Value Survey MCQ</h6>
                                                                                    </a>
                                                                                </div>
                                                                            }
                                                                        </div>
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    </div>

                                                    <br />
                                                    <br />

                                                    <div class="row">
                                                        @foreach (var topic in ViewBag.Topicss)
                                                        {
                                                            <div class="col-12">
                                                                <p class="m-none pl-md">
                                                                    <strong class="text-dark text-md">Psychological Expression</strong>
                                                                </p>
                                                            </div>

                                                            if (Model.UserTopic.Count > 0)
                                                            {
                                                                foreach (var item in Model.UserTopic.OrderBy(x => x.Order).Where(x => x.ParentTopicID == topic.TopicID))
                                                                {
                                                                    if (!string.IsNullOrEmpty(item.TopicName) && item.TopicName.Contains("MCQ"))
                                                                    {
                                                                        <div class="col-12 col-sm-6 col-md-4 col-lg-3 mb-3 d-flex justify-content-center">
                                                                            <div class="text-center">
                                                                                @if (item.TopicName == "Before Movie MCQ")
                                                                                {
                                                                                    <a href="@Url.Action("MCQ", "Course", new { CourseID = ViewBag.CourseID, TopicID = item.TopicID, LanguageID = 1 })" data-kmt="1">
                                                                                        <img src="~/Images/BM.jpeg" class="img-fluid rounded" />
                                                                                        <h6 class="m-0">Before Movie MCQ</h6>
                                                                                    </a>
                                                                                }
                                                                                else if (item.TopicName == "After Movie MCQ")
                                                                                {
                                                                                    <a href="@Url.Action("MCQ", "Course", new { CourseID = ViewBag.CourseID, TopicID = item.TopicID, LanguageID = 1 })" data-kmt="1">
                                                                                        <img src="~/Images/AM.jpeg" class="img-fluid rounded" />
                                                                                        <h6 class="m-0">After Movie MCQ</h6>
                                                                                    </a>
                                                                                }
                                                                            </div>
                                                                        </div>
                                                                    }
                                                                    else if (!string.IsNullOrEmpty(item.TopicName) && item.TopicName.Contains("PDF"))
                                                                    {
                                                                        <div class="col-12 col-sm-6 col-md-4 col-lg-3 mb-3 d-flex justify-content-center">
                                                                            <div class="text-center">
                                                                                <a target="_blank" href="@Url.Content(item.TrainerResource)">
                                                                                    <img src="@Url.Content(item.TrainerExercise)" class="img-fluid rounded" />
                                                                                    <h6 class="m-0">@item.TopicName</h6>
                                                                                </a>
                                                                            </div>
                                                                        </div>
                                                                    }
                                                                    else if (!string.IsNullOrEmpty(item.TopicName) && item.TopicName.Contains("Introduction"))
                                                                    {
                                                                        if (item.TrainerVideo.Contains("vimeo.com"))
                                                                        {

                                                                            <div class="col-12 col-sm-6 col-md-4 col-lg-3 mb-3 d-flex justify-content-center">
                                                                                <button type="button" class="btn w-100" data-toggle="modal" data-target="#CompetitionStudentVideo">
                                                                                    <div id="videoChange3" class="youtube-player-custom w-100"
                                                                                         data-activiyid="@item.TopicID"
                                                                                         data-id="@(item.TrainerVideo+"&feature=youtu.be")">
                                                                                    </div>
                                                                                    <h6 class="m-1 youtube-player-caption text-center" style="font-size: 14px;">@item.TopicName</h6>
                                                                                </button>
                                                                            </div>


                                                                        }
                                                                        else
                                                                        {
                                                                            <div class="col-12 col-sm-6 col-md-4 col-lg-3 mb-3 d-flex justify-content-center">
                                                                                <button type="button" class="btn w-100" data-toggle="modal" data-target="#CompetitionStudentVideo">
                                                                                    <div id="videoChange3" class="youtube-player-custom w-100"
                                                                                         data-activiyid="@item.TopicID"
                                                                                         data-id="@(item.TrainerVideo+"&feature=youtu.be")">
                                                                                    </div>
                                                                                    <h6 class="m-1 youtube-player-caption text-center" style="font-size: 14px;">@item.TopicName</h6>
                                                                                </button>
                                                                            </div>


                                                                        }


                                                                    }
                                                                    else if (!string.IsNullOrEmpty(item.TopicName) && item.TopicName.Contains("Movie"))
                                                                    {


                                                                        if (item.TrainerVideo.Contains("vimeo.com"))
                                                                        {

                                                                            <div class="col-12 col-sm-6 col-md-4 col-lg-3 mb-3 d-flex justify-content-center">
                                                                                <button type="button" class="btn w-100" data-toggle="modal" data-target="#CompetitionStudentVideo">
                                                                                    <div id="videoChange3" class="youtube-player-custom w-100"
                                                                                         data-activiyid="@item.TopicID"
                                                                                         data-id="@(item.TrainerVideo+"&feature=youtu.be")">
                                                                                    </div>
                                                                                    <h6 class="m-1 youtube-player-caption text-center" style="font-size: 14px;">@item.TopicName</h6>
                                                                                </button>
                                                                            </div>

                                                                        }
                                                                        else
                                                                        {
                                                                            <div class="col-12 col-sm-6 col-md-4 col-lg-3 mb-3 d-flex justify-content-center">
                                                                                <button type="button" class="btn w-100" data-toggle="modal" data-target="#CompetitionStudentVideo">
                                                                                    <div id="videoChange3" class="youtube-player-custom w-100"
                                                                                         data-activiyid="@item.TopicID"
                                                                                         data-id="@(item.TrainerVideo+"&feature=youtu.be")">
                                                                                    </div>
                                                                                    <h6 class="m-1 youtube-player-caption text-center" style="font-size: 14px;">@item.TopicName</h6>
                                                                                </button>
                                                                            </div>

                                                                        }

                                                                    }
                                                                }
                                                            }
                                                        }
                                                    </div>
                                                </div>

                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="test-nl-2" class="content row mb-4">
                    <div class="col-md-12">
                        <div class="card h-200 d-flex align-items-center justify-content-center">
                            <div class="row g-0 w-100">
                                <div class="tab-pane" id="w4-practical">
                                    <div class="container mt-5">
                                        <h2 class="text-left text-wjdark">@Model.CourseName Practicals</h2>
                                        <div class="mt-4">
                                            @foreach (var practical in ViewBag.Practicals)
                                            {
                                                <div class="card mb-4">
                                                    <div class="card-body">
                                                        <div class="row">
                                                            <div class="col-md-4 col-sm-6">
                                                                <img src="@Url.Content(practical.Thumbnail)" class="img-fluid" />
                                                            </div>
                                                            <div class="col-md-8 col-sm-6">
                                                                <h4 class="text-wjdark text-uppercase">@practical.OrderNo<strong>. @practical.Title</strong></h4>
                                                                <div class="text-right">
                                                                    @if (practical.Resources != "NoFile" && practical.Resources != null)
                                                                    {
                                                                        <a href="@Url.Content(practical.Resources)" target="_blank" download>
                                                                            <span class="badge bg-warning">Download Activity</span>
                                                                        </a>
                                                                    }
                                                                </div>
                                                                <p>@practical.Description</p>

                                                                @using (Html.BeginForm("Creativity", "Course", FormMethod.Post, new { enctype = "multipart/form-data" }))
                                                                {
                                                                    <input type="hidden" name="CourseName" id="CourseNameInput" />
                                                                    <div class="mb-3">
                                                                        <label class="form-label">Upload files</label>
                                                                        <input type="file" id="uploadDoc" name="UploadDoc" class="form-control" />
                                                                    </div>
                                                                    <button type="submit" class="btn btn-primary">Submit</button>
                                                                }
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            }
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>


</div>
<div class="modal fade" id="CompetitionStudentVideo" tabindex="-1" role="dialog" aria-labelledby="ModalPopup" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header" style="padding: 7px;">
                <div class="col-sm-12">
                    <button type="button" class="close pull-right" data-dismiss="modal" style="color: #155b7d; font-size: 30px;" aria-hidden="true">×</button>
                </div>
            </div>
            <div class="modal-body" style="padding: 0px; margin: 0px;">
                <div class="row m-md" style="margin: 0px !important;">
                    <div class="col-md-12" style="margin: 0px !important; padding: 0px;">
                        <div class="embed-responsive embed-responsive-4by3">
                            <iframe id="Competition_ifrm_Video" frameborder="0" allowfullscreen="1"></iframe>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>



<script src="~/Content/js/YoutubeCustom.js"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/magnific-popup.js/1.1.0/jquery.magnific-popup.min.js"></script>
<script src="https://player.vimeo.com/api/player.js"></script>
@*<script src="~/Content/bstepper/bs-stepper.min.js"></script>
    <script src="~/Content/bstepper/main.js"></script>*@
<script src="https://johann-s.github.io/bs-stepper/dist/js/bs-stepper.min.js"></script>
<script>


    var stepper3 = new Stepper(document.querySelector('#stepper3'), {
        linear: false,
        animation: true
    })
    $(document).ready(function () {
        // When the modal opens, apply the 'inert' attribute to the page content
        $('#CompetitionStudentVideo').on('shown.bs.modal', function () {
            var pageContent = document.getElementById('pageContent');
            if (pageContent) {
                pageContent.setAttribute('inert', '');
            }
        });

        // When the modal closes, remove the 'inert' attribute
        $('#CompetitionStudentVideo').on('hidden.bs.modal', function () {
            var pageContent = document.getElementById('pageContent');
            if (pageContent) {
                pageContent.removeAttribute('inert');
            }
        });
    });

    $('#CompetitionStudentVideo').on('hidden.bs.modal', function () {
        $("#Competition_ifrm_Video").attr("src", "");
    });
    $('#CompetitionStudentVideo').on('shown.bs.modal', function () {
        document.getElementById('pageContent').setAttribute('inert', '');
    });

    // When the modal closes, remove the 'inert' attribute
    $('#CompetitionStudentVideo').on('hidden.bs.modal', function () {
        document.getElementById('pageContent').removeAttribute('inert');
    });

    $('.youtube-player-custom').on('click', function () {
        $('#CompetitionStudentVideo').modal('show');
    });

    // Ensure the modal closes properly
    $('.close').on('click', function () {
        $('#CompetitionStudentVideo').modal('hide');
    });
    
</script>

<script>
    // Initialize Vimeo player
    var iframe = document.getElementById('vimeoPlayer');
    var player = new Vimeo.Player(iframe);

    // Example: Play the video
    player.play().then(function () {
        console.log('Video is playing');
    }).catch(function (error) {
        console.error('Error playing the video:', error);
    });

    // Example: Pause the video after 5 seconds
    setTimeout(function () {
        player.pause().then(function () {
            console.log('Video paused after 5 seconds');
        }).catch(function (error) {
            console.error('Error pausing the video:', error);
        });
    }, 5000);

    $('#CompetitionStudentVideo').on('hidden.bs.modal', function () {
        $("#Competition_ifrm_Video").attr("src", "");
    });
</script>

